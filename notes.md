# 가상환경 생성
python -m venv .venv
source .venv/bin/activate

# FastAPI와 ASGI 서버인 Uvicorn을 설치
pip install fastapi uvicorn

# 다음 명령어로 서버 실행
uvicorn main:app --reload
http://localhost:8000

# Swagger 기반의 자동 문서
http://localhost:8000/docs

# 요청 처리와 라우팅
라우팅을 정의할 때는 Python의 데코레이터 문법을 사용

# 데이터 검증과 직렬화: FastAPI의 Pydantic 모델
- Pydantic은 파이썬 타입 힌트에 기반하여 데이터의 유효성을 검증하고, 직렬화와 역직렬화 과정을 명쾌하게 처리
- 숫자가 아니라 문자열이 입력되면 에러가 발생하고, 필수 필드가 누락될 경우에도 422 에러와 함께 상세한 이유가 반환
- FastAPI의 response_model 파라미터를 이용하면, 실제 반환 값에서 필요한 필드만 골라 구조화해서 전송할 수 있습니다. 예를 들어, 민감한 정보를 데이터베이스에서 불러와도 응답 모델에 포함하지 않은 필드는 자동으로 걸러짐

# 의존성 주입과 모듈화된 코드 구조
- 의존성 주입(Dependency Injection)은 이러한 문제를 매우 우아하게 해결
- Depends를 활용하면 의존성을 선언형으로 지정할 수 있다

# 경로, 쿼리, 바디 파라미터
- FastAPI의 진정한 강점 중 하나는 다양한 방식으로 클라이언트의 입력을 받아들여, 동적이고 유연한 웹 API를 쉽게 설계할 수 있다는 점

# 비동기 프로그래밍: 성능 극대화
- async def와 await 키워드를 적극적으로 활용
- FastAPI 이벤트 루프(Event Loop)를 통해 다수의 사용자 요청을 멀티스레드 방식보다 훨씬 가볍게 처리
- 엔드포인트 함수는 가능한 한 비동기로 선언

# 데이터베이스 통합: 동기와 비동기 (SQLAlchemy 등 활용)
- SQLAlchemy는 Python에서 가장 폭넓게 쓰이는 ORM 도구로, 동기와 비동기 모드를 모두 지원
- SQLAlchemy의 Session을 직접 사용할 수도 있고, 최근에는 async_session 객체를 활용한 비동기 쿼리도 적극적으로 도입

# 사용자 인증과 보안 필수 요소
-  FastAPI는 이미 설계 단계에서 인증(Authentication)과 권한부여(Authorization)의 중요성을 반영
- 가장 널리 쓰이는 방식은 OAuth2와 JWT(Json Web Token) 조합
- OAuth2 비밀번호 흐름을 활용하면, 사용자는 아이디와 비밀번호를 제출하고, 서버는 JWT 토큰을 발급한다. 이 토큰이야말로 이후 액세스의 열쇠로 작동
- 실제 FastAPI 코드에서는 OAuth2PasswordBearer로 토큰 기반 인증 흐름을 품고, 암호화엔 bcrypt 등으로 비밀번호를 해싱하여 저장
- FastAPI는 환경 변수, 설정 파일 분리와 같은 기본 보안 기준도 지키기 쉽도록 구조적 지원을 아끼지 않는다.

# OpenAPI와 Swagger를 통한 자동 API 문서화
- 모든 과정이 코드와 동기화되어 자동으로 이루어지기 때문에, 수동 문서를 따로 관리할 필요가 없어집니다. API 기능이 추가∙변경될 때마다 문서도 함께 갱신

# FastAPI 애플리케이션의 테스트와 디버깅
- TestClient를 활용하면 실제 서버를 띄우지 않고도 API 동작을 상세히 확인
- pytest와 같은 프레임워크와 연계해 다양한 경계상황이나 예외 케이스를 꼼꼼히 점검

# 백그라운드 작업, 미들웨어, 이벤트 훅
- 배경 작업(Background Tasks) 이해와 활용
- 미들웨어(Middleware)로 요청, 응답 흐름 제어하기
- 이벤트 훅(Event Hooks)과 라이프사이클 관리

# 프로덕션 환경에서 FastAPI 실행 (Uvicorn, Gunicorn, Docker, 클라우드)
- Gunicorn과 Uvicorn을 결합한 구조가 널리 쓰임
- Dockerfile을 이용하면 운영체제, 패키지, 소스 코드, 실행환경까지 모두 컨테이너 이미지에 정의가능
- Docker 이미지를 컨테이너 레지스트리에 업로드한 뒤, 클라우드 환경(예: Google Cloud Run, AWS ECS)에서 원하는 형태로 스케일아웃과 배포 자동화

# 산업 현장에서의 FastAPI 도입 배경
- 우버, 넷플릭스, 마이크로소프트 등 글로벌 기업들은 대규모 트래픽 처리와 실시간 사용자 경험을 지원하기 위해 FastAPI를 적극 선택
- 주요 활용 사례: CRUD, 인증, 복합 엔드포인트 설계

# 유지보수 가능하고 확장성 있는 웹 애플리케이션을 위한 FastAPI Best Practice
- 애플리케이션의 덩치가 커질수록 개발자는 코드의 복잡함에 부딪히게 됩니다. FastAPI 프로젝트에서는 라우터, 모델, 서비스, 스키마 등 각 레이어를 명확히 구분하세요. 관련 기능이라면 routers/users.py, schemas/users.py, services/users.py처럼 역할별로 파일을 쪼개고 디렉토리도 분리하는 것이 좋습니다. 이는 개발팀 내 협업을 원활하게 하고, 신규 기능이나 수정도 쉽게 만듭니다.
- 복잡한 서비스, 데이터베이스 세션, 인증 절차 등은 의존성 함수로 정의하고 Depends를 활용해 엔드포인트와 연결하세요. 이렇게 하면 반복되는 코드를 줄일 수 있고, 테스트 코드 작성이나 서비스 확장, Mocking에도 유리합니다.
- 비즈니스 로직은 라우터에 직접 작성하기보다, 서비스 레이어로 분리하세요. 이 계층화는 기능별 책임을 명확히 하고, 테스트, 유지보수, 리팩터링 과정에서 혼란을 막는 결정적 역할을 합니다. 데이터 접근 로직도 별도의 레포지토리나 DAO로 나누면 한층 견고한 구조가 완성됩니다.
- 고성능을 위해 Redis 등 인메모리 캐시 시스템을 통합하세요. 빈번히 요청되는 데이터, 인증 정보, 세션 등은 캐시로 빠르게 처리하고, 무거운 쿼리는 최소화합니다. 아울러 Gunicorn과 Uvicorn 조합, Docker 등 컨테이너 환경, 클라우드 네이티브 전략을 미리 준비해두면 대량 유저 유입도 문제없습니다.